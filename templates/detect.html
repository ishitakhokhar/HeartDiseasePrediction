{% extends "base.html" %}
{% block content %}

<!-- Hero Section -->
<div class="container-fluid px-0 mb-5">
    <div class="prediction-hero py-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="text-white display-5 fw-bold mb-3">
                        <i class="fas fa-heart-pulse me-3"></i>Heart Disease Risk Assessment
                    </h1>
                    <p class="lead text-white-50 mb-4">
                        Enter patient health metrics for AI-powered cardiovascular risk prediction
                    </p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-light text-primary fs-6 px-3 py-2">
                            <i class="fas fa-clock me-1"></i> Takes 2 minutes
                        </span>
                        <span class="badge bg-light text-success fs-6 px-3 py-2">
                            <i class="fas fa-shield-alt me-1"></i> Secure & Confidential
                        </span>
                        <span class="badge bg-light text-danger fs-6 px-3 py-2">
                            <i class="fas fa-brain me-1"></i> AI-Powered Analysis
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 text-lg-end mt-4 mt-lg-0">
                    <div class="card border-0 shadow-lg" style="background: rgba(255, 255, 255, 0.95);">
                        <div class="card-body text-center p-4">
                            <i class="fas fa-stethoscope text-primary fs-1 mb-3"></i>
                            <h5 class="text-primary mb-2">Clinical Form</h5>
                            <p class="text-muted small mb-0">Complete all required fields for accurate assessment</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <!-- Progress Indicator -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body p-3">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <div class="step-indicator active">
                                <span class="step-number">1</span>
                                <span class="step-label">Personal Info</span>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-indicator">
                                <span class="step-number">2</span>
                                <span class="step-label">Vitals</span>
                            </div>
                            <div class="step-connector"></div>
                            <div class="step-indicator">
                                <span class="step-number">3</span>
                                <span class="step-label">Lifestyle</span>
                            </div>
                        </div>
                        <div class="text-muted small">
                            <i class="fas fa-lock me-1"></i> All data is encrypted
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Main Form Card -->
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-white border-0 py-4">
                    <h3 class="text-center mb-2">
                        <i class="fas fa-file-medical text-primary me-2"></i>
                        Patient Health Assessment Form
                    </h3>
                    <p class="text-center text-muted mb-0">
                        Please fill in all fields accurately for precise risk evaluation
                    </p>
                </div>

                <form action="/predict" method="POST" id="predictionForm">
                    <div class="card-body p-4 p-md-5">
                        <!-- Section 1: Personal Information -->
                        <div class="form-section mb-5" id="section-personal">
                            <div class="section-header mb-4">
                                <h5 class="text-primary">
                                    <i class="fas fa-user-circle me-2"></i>
                                    Personal Information
                                </h5>
                                <p class="text-muted small mb-0">Basic demographic details</p>
                            </div>

                            <div class="row g-4">
                                <!-- Age -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" name="age" class="form-control form-control-lg"
                                            id="ageInput" min="18" max="120" required placeholder="Age">
                                        <label for="ageInput">
                                            <i class="fas fa-birthday-cake me-2 text-muted"></i>
                                            Age (years)
                                        </label>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">Enter age between 18-120 years</small>
                                    </div>
                                </div>

                                <!-- Gender -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="gender" class="form-select form-select-lg" id="genderSelect"
                                            required>
                                            <option value="" disabled selected>Select gender</option>
                                            <option value="1">Male</option>
                                            <option value="2">Female</option>
                                        </select>
                                        <label for="genderSelect">
                                            <i class="fas fa-venus-mars me-2 text-muted"></i>
                                            Gender
                                        </label>
                                    </div>
                                </div>

                                <!-- Height & Weight -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" name="height" class="form-control form-control-lg"
                                            id="heightInput" min="100" max="250" required placeholder="Height">
                                        <label for="heightInput">
                                            <i class="fas fa-ruler-vertical me-2 text-muted"></i>
                                            Height (cm)
                                        </label>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">Range: 100-250 cm</small>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" name="weight" class="form-control form-control-lg"
                                            id="weightInput" min="30" max="250" required placeholder="Weight">
                                        <label for="weightInput">
                                            <i class="fas fa-weight me-2 text-muted"></i>
                                            Weight (kg)
                                        </label>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">Range: 30-250 kg</small>
                                    </div>
                                    <div class="mt-2">
                                        <small class="text-muted" id="bmiIndicator">BMI: --</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Vital Signs -->
                        <div class="form-section mb-5" id="section-vitals">
                            <div class="section-header mb-4">
                                <h5 class="text-danger">
                                    <i class="fas fa-heartbeat me-2"></i>
                                    Vital Signs
                                </h5>
                                <p class="text-muted small mb-0">Blood pressure and lab values</p>
                            </div>

                            <div class="row g-4">
                                <!-- Blood Pressure -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" name="ap_hi" class="form-control form-control-lg"
                                            id="systolicInput" min="70" max="250" required placeholder="Systolic BP">
                                        <label for="systolicInput">
                                            <i class="fas fa-tachometer-alt me-2 text-muted"></i>
                                            Systolic BP (mmHg)
                                        </label>
                                    </div>
                                    <div class="bp-status mt-2">
                                        <small id="systolicStatus" class="text-muted">Normal: 90-120 mmHg</small>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" name="ap_lo" class="form-control form-control-lg"
                                            id="diastolicInput" min="40" max="150" required placeholder="Diastolic BP">
                                        <label for="diastolicInput">
                                            <i class="fas fa-tachometer-alt me-2 text-muted"></i>
                                            Diastolic BP (mmHg)
                                        </label>
                                    </div>
                                    <div class="bp-status mt-2">
                                        <small id="diastolicStatus" class="text-muted">Normal: 60-80 mmHg</small>
                                    </div>
                                </div>

                                <!-- Blood Pressure Visual Indicator -->
                                <div class="col-12">
                                    <div class="card border-0 bg-light mb-3">
                                        <div class="card-body p-3">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 me-3">
                                                    <i class="fas fa-info-circle text-primary fs-4"></i>
                                                </div>
                                                <div class="flex-grow-1">
                                                    <h6 class="mb-1">Blood Pressure Guide</h6>
                                                    <div class="row g-2">
                                                        <div class="col">
                                                            <div
                                                                class="p-2 text-center border rounded bg-success bg-opacity-10">
                                                                <small class="fw-bold text-success">Normal</small>
                                                                <br>
                                                                <small>≤120/80</small>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            <div
                                                                class="p-2 text-center border rounded bg-warning bg-opacity-10">
                                                                <small class="fw-bold text-warning">Elevated</small>
                                                                <br>
                                                                <small>120-129/≤80</small>
                                                            </div>
                                                        </div>
                                                        <div class="col">
                                                            <div
                                                                class="p-2 text-center border rounded bg-danger bg-opacity-10">
                                                                <small class="fw-bold text-danger">High</small>
                                                                <br>
                                                                <small>≥130/≥80</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Cholesterol -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="cholesterol" class="form-select form-select-lg"
                                            id="cholesterolSelect" required>
                                            <option value="" disabled selected>Select cholesterol level</option>
                                            <option value="1">Normal</option>
                                            <option value="2">Above Normal</option>
                                            <option value="3">High</option>
                                        </select>
                                        <label for="cholesterolSelect">
                                            <i class="fas fa-vial me-2 text-muted"></i>
                                            Cholesterol Level
                                        </label>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">Total cholesterol measurement</small>
                                    </div>
                                </div>

                                <!-- Glucose -->
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select name="gluc" class="form-select form-select-lg" id="glucoseSelect"
                                            required>
                                            <option value="" disabled selected>Select glucose level</option>
                                            <option value="1">Normal</option>
                                            <option value="2">Above Normal</option>
                                            <option value="3">High</option>
                                        </select>
                                        <label for="glucoseSelect">
                                            <i class="fas fa-vial me-2 text-muted"></i>
                                            Glucose Level
                                        </label>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">Fasting blood glucose</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: Lifestyle Factors -->
                    <div class="form-section mb-5" id="section-lifestyle">
                        <h5 class="text-success mb-4">Lifestyle Factors</h5>
                    
                        <div class="row">
                            <!-- Smoking -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Smoking Status</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="smoke" id="smokeNo" value="0" required>
                                        <label class="form-check-label" for="smokeNo">No</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="smoke" id="smokeYes" value="1">
                                        <label class="form-check-label" for="smokeYes">Yes</label>
                                    </div>
                                </div>
                            </div>
                    
                            <!-- Alcohol -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Alcohol Intake</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alco" id="alcoNo" value="0" required>
                                        <label class="form-check-label" for="alcoNo">No</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alco" id="alcoYes" value="1">
                                        <label class="form-check-label" for="alcoYes">Yes</label>
                                    </div>
                                </div>
                            </div>
                    
                            <!-- Physical Activity -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Physical Activity</label>
                                <div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="active" id="activeNo" value="0" required>
                                        <label class="form-check-label" for="activeNo">No</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="active" id="activeYes" value="1">
                                        <label class="form-check-label" for="activeYes">Yes</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                        <!-- Form Actions -->
                        <div class="row mt-5">
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <button type="button" class="btn btn-outline-secondary" id="clearForm">
                                            <i class="fas fa-redo me-2"></i> Clear Form
                                        </button>
                                    </div>
                                    <div class="d-flex gap-3">
                                        <button type="button" class="btn btn-lg btn-outline-primary" id="validateForm">
                                            <i class="fas fa-check-circle me-2"></i> Validate Inputs
                                        </button>
                                        <button type="submit" class="btn btn-lg btn-danger px-5" id="submitButton">
                                            <i class="fas fa-heartbeat me-2"></i> Analyze Risk
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Additional Information -->
            <div class="row mt-4">
                <div class="col-md-6 mb-3">
                    <div class="card border-0 bg-light shadow-sm">
                        <div class="card-body">
                            <h6 class="mb-3">
                                <i class="fas fa-info-circle text-primary me-2"></i>
                                How This Works
                            </h6>
                            <ul class="small mb-0">
                                <li>AI model analyzes 11 key health parameters</li>
                                <li>Prediction based on thousands of clinical cases</li>
                                <li>Results are statistical estimates, not diagnoses</li>
                                <li>All calculations performed server-side</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="card border-0 bg-light shadow-sm">
                        <div class="card-body">
                            <h6 class="mb-3">
                                <i class="fas fa-shield-alt text-success me-2"></i>
                                Privacy & Security
                            </h6>
                            <ul class="small mb-0">
                                <li>No personal identifiers collected</li>
                                <li>Data encrypted during transmission</li>
                                <li>Results not stored permanently</li>
                                <li>HIPAA-compliant data handling</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Disclaimer -->
            <div class="alert alert-warning border-0 shadow-sm mt-4">
                <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 me-3">
                        <i class="fas fa-exclamation-triangle fa-2x"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h6 class="alert-heading mb-1">Important Disclaimer</h6>
                        <p class="small mb-0">
                            This tool provides a risk assessment based on statistical analysis and is not a medical
                            diagnosis.
                            Always consult with a qualified healthcare professional for medical advice and treatment
                            decisions.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Form validation and interactivity
        const form = document.getElementById('predictionForm');
        const submitButton = document.getElementById('submitButton');
        const clearButton = document.getElementById('clearForm');
        const validateButton = document.getElementById('validateForm');
        const riskPreview = document.querySelector('.risk-value');

        // BMI Calculation
        const heightInput = document.getElementById('heightInput');
        const weightInput = document.getElementById('weightInput');
        const bmiIndicator = document.getElementById('bmiIndicator');

        function calculateBMI() {
            const height = parseFloat(heightInput.value) / 100; // Convert to meters
            const weight = parseFloat(weightInput.value);

            if (height > 0 && weight > 0) {
                const bmi = (weight / (height * height)).toFixed(1);
                bmiIndicator.textContent = `BMI: ${bmi}`;

                // Color code BMI
                if (bmi < 18.5) {
                    bmiIndicator.className = 'text-info';
                } else if (bmi < 25) {
                    bmiIndicator.className = 'text-success';
                } else if (bmi < 30) {
                    bmiIndicator.className = 'text-warning';
                } else {
                    bmiIndicator.className = 'text-danger';
                }
            }
        }

        heightInput.addEventListener('input', calculateBMI);
        weightInput.addEventListener('input', calculateBMI);

        // Blood Pressure Status
        const systolicInput = document.getElementById('systolicInput');
        const diastolicInput = document.getElementById('diastolicInput');
        const systolicStatus = document.getElementById('systolicStatus');
        const diastolicStatus = document.getElementById('diastolicStatus');

        function updateBPStatus() {
            const systolic = parseInt(systolicInput.value);
            const diastolic = parseInt(diastolicInput.value);

            // Systolic
            if (systolic) {
                if (systolic < 90) {
                    systolicStatus.textContent = 'Low (Hypotension)';
                    systolicStatus.className = 'text-info';
                } else if (systolic <= 120) {
                    systolicStatus.textContent = 'Normal';
                    systolicStatus.className = 'text-success';
                } else if (systolic <= 129) {
                    systolicStatus.textContent = 'Elevated';
                    systolicStatus.className = 'text-warning';
                } else {
                    systolicStatus.textContent = 'High (Hypertension)';
                    systolicStatus.className = 'text-danger';
                }
            }

            // Diastolic
            if (diastolic) {
                if (diastolic < 60) {
                    diastolicStatus.textContent = 'Low (Hypotension)';
                    diastolicStatus.className = 'text-info';
                } else if (diastolic <= 80) {
                    diastolicStatus.textContent = 'Normal';
                    diastolicStatus.className = 'text-success';
                } else if (diastolic <= 89) {
                    diastolicStatus.textContent = 'Elevated';
                    diastolicStatus.className = 'text-warning';
                } else {
                    diastolicStatus.textContent = 'High (Hypertension)';
                    diastolicStatus.className = 'text-danger';
                }
            }
        }

        systolicInput.addEventListener('input', updateBPStatus);
        diastolicInput.addEventListener('input', updateBPStatus);

        // Real-time risk estimation
        function estimateRisk() {
            // This is a simplified estimation for demo purposes
            let risk = 10; // Base risk

            // Age factor
            const age = parseInt(document.getElementById('ageInput').value) || 40;
            if (age > 50) risk += 20;
            if (age > 60) risk += 15;

            // Blood pressure factor
            const systolic = parseInt(systolicInput.value) || 120;
            const diastolic = parseInt(diastolicInput.value) || 80;
            if (systolic > 130 || diastolic > 85) risk += 25;

            // Lifestyle factors
            const smoke = document.querySelector('input[name="smoke"]:checked');
            const alco = document.querySelector('input[name="alco"]:checked');
            const active = document.querySelector('input[name="active"]:checked');

            if (smoke && smoke.value === '1') risk += 20;
            if (active && active.value === '0') risk += 15;

            // Cap at 95%
            risk = Math.min(risk, 95);

            // Update preview
            if (isFormValid()) {
                riskPreview.textContent = risk + '%';

                // Update color
                if (risk < 30) {
                    riskPreview.parentElement.parentElement.style.background = 'linear-gradient(135deg, #2ecc71 0%, #27ae60 100%)';
                } else if (risk < 60) {
                    riskPreview.parentElement.parentElement.style.background = 'linear-gradient(135deg, #f39c12 0%, #d35400 100%)';
                } else {
                    riskPreview.parentElement.parentElement.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
                }
            }
        }

        // Monitor all inputs for risk estimation
        form.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('input', estimateRisk);
            input.addEventListener('change', estimateRisk);
        });

        // Form validation
        function isFormValid() {
            const requiredInputs = form.querySelectorAll('[required]');
            let isValid = true;

            requiredInputs.forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.classList.add('is-invalid');
                } else {
                    input.classList.remove('is-invalid');
                }
            });

            return isValid;
        }

        // Validate button
        validateButton.addEventListener('click', function () {
            if (isFormValid()) {
                this.innerHTML = '<i class="fas fa-check-circle me-2"></i> All Inputs Valid';
                this.className = 'btn btn-lg btn-success px-4';

                // Show success message
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert alert-success alert-dismissible fade show mt-3';
                alertDiv.innerHTML = `
                    <i class="fas fa-check-circle me-2"></i>
                    <strong>All inputs are valid!</strong> Ready to analyze risk.
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;
                form.insertBefore(alertDiv, form.querySelector('.row.mt-5'));
            } else {
                this.innerHTML = '<i class="fas fa-exclamation-circle me-2"></i> Check Inputs';
                this.className = 'btn btn-lg btn-warning px-4';

                // Scroll to first invalid input
                const firstInvalid = form.querySelector('.is-invalid');
                if (firstInvalid) {
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstInvalid.focus();
                }
            }
        });

        // Clear form
        clearButton.addEventListener('click', function () {
            if (confirm('Are you sure you want to clear all form data?')) {
                form.reset();
                bmiIndicator.textContent = 'BMI: --';
                bmiIndicator.className = 'text-muted';
                systolicStatus.textContent = 'Normal: 90-120 mmHg';
                systolicStatus.className = 'text-muted';
                diastolicStatus.textContent = 'Normal: 60-80 mmHg';
                diastolicStatus.className = 'text-muted';
                riskPreview.textContent = '--%';
                riskPreview.parentElement.parentElement.style.background = '';

                // Reset validate button
                validateButton.innerHTML = '<i class="fas fa-check-circle me-2"></i> Validate Inputs';
                validateButton.className = 'btn btn-lg btn-outline-primary';
            }
        });

        // Form submission
        form.addEventListener('submit', function (e) {
            if (!isFormValid()) {
                e.preventDefault();
                validateButton.click();
                return false;
            }

            // Show loading state
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Analyzing...';
            submitButton.disabled = true;

            // Add delay to show loading state
            setTimeout(() => {
                submitButton.innerHTML = '<i class="fas fa-heartbeat me-2"></i> Analyze Risk';
                submitButton.disabled = false;
            }, 2000);
        });

        // Step indicator
        const sections = ['section-personal', 'section-vitals', 'section-lifestyle'];
        const steps = document.querySelectorAll('.step-indicator');

        function updateStepIndicator() {
            const scrollPosition = window.scrollY + 100;

            sections.forEach((sectionId, index) => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;

                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        steps.forEach((step, stepIndex) => {
                            if (stepIndex <= index) {
                                step.classList.add('active');
                            } else {
                                step.classList.remove('active');
                            }
                        });
                    }
                }
            });
        }

        window.addEventListener('scroll', updateStepIndicator);
        updateStepIndicator();
    });
</script>

<style>
    .prediction-hero {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .step-indicator {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }

    .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e9ecef;
        color: #6c757d;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-bottom: 8px;
        transition: all 0.3s ease;
    }

    .step-indicator.active .step-number {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 4px 10px rgba(102, 126, 234, 0.4);
    }

    .step-label {
        font-size: 0.85rem;
        color: #6c757d;
        font-weight: 500;
    }

    .step-indicator.active .step-label {
        color: #667eea;
        font-weight: 600;
    }

    .step-connector {
        width: 80px;
        height: 2px;
        background: #e9ecef;
        margin: 0 10px;
        align-self: flex-start;
        margin-top: 19px;
    }

    .form-section {
        padding-bottom: 2rem;
        border-bottom: 1px solid #e9ecef;
    }

    .section-header {
        padding-bottom: 1rem;
        border-bottom: 2px solid #f8f9fa;
    }

    .form-floating>.form-control {
        border-left: 4px solid #667eea;
    }

    .form-floating>.form-control:focus {
        border-left: 4px solid #764ba2;
        box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
    }

    .btn-check:checked+.btn-outline-success {
        background-color: #198754;
        color: white;
    }

    .btn-check:checked+.btn-outline-danger {
        background-color: #dc3545;
        color: white;
    }

    .btn-check:checked+.btn-outline-warning {
        background-color: #ffc107;
        color: #212529;
    }

    .btn-check:checked+.btn-outline-primary {
        background-color: #0d6efd;
        color: white;
    }

    .risk-indicator {
        background: rgba(255, 255, 255, 0.2);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        text-align: center;
    }

    .risk-label {
        display: block;
        font-size: 0.75rem;
        opacity: 0.9;
        letter-spacing: 1px;
    }

    .risk-value {
        display: block;
        font-size: 1.8rem;
        font-weight: bold;
        margin-top: 4px;
    }

    .bg-gradient-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .card {
        transition: transform 0.2s ease-in-out;
        border-radius: 12px;
        overflow: hidden;
    }

    .card:hover {
        transform: translateY(-3px);
    }

    /* Form validation styles */
    .is-invalid {
        border-color: #dc3545 !important;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }

    .is-invalid:focus {
        box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25) !important;
    }
</style>
{% endblock %}